<!DOCTYPE html><html lang="pt-br"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>O que faz um nutricionista de restaurantes ? - Coisas Cá de Casa</title><meta name="description" content="Descubra o papel essencial do nutricionista em restaurantes e como ele garante refeições saudáveis, seguras e saborosas para os clientes."><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="canonical" href="https://coisascadecasa.com.br/o-que-faz-um-nutricionista-de-restaurantes/"><meta property="og:title" content="O que faz um nutricionista de restaurantes ?"><meta property="og:image" content="https://coisascadecasa.com.br/media/posts/237/o-que-faz-um-nutricionista-de-restaurantes.jpg"><meta property="og:image:width" content="1344"><meta property="og:image:height" content="768"><meta property="og:site_name" content="Coisas Cá de Casa"><meta property="og:description" content="Descubra o papel essencial do nutricionista em restaurantes e como ele garante refeições saudáveis, seguras e saborosas para os clientes."><meta property="og:url" content="https://coisascadecasa.com.br/o-que-faz-um-nutricionista-de-restaurantes/"><meta property="og:type" content="article"><link rel="shortcut icon" href="https://coisascadecasa.com.br/media/website/coisas-ca-de-casa-2.webp" type="image/x-icon"><link rel="stylesheet" href="https://coisascadecasa.com.br/assets/css/style.css?v=73a500141f4b7b2ecb23bff9aae85ceb"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://coisascadecasa.com.br/o-que-faz-um-nutricionista-de-restaurantes/"},"headline":"O que faz um nutricionista de restaurantes ?","datePublished":"2025-09-18T00:00+00:00","dateModified":"2025-09-18T00:00+00:00","image":{"@type":"ImageObject","url":"https://coisascadecasa.com.br/media/posts/237/o-que-faz-um-nutricionista-de-restaurantes.jpg","height":768,"width":1344},"description":"Descubra o papel essencial do nutricionista em restaurantes e como ele garante refeições saudáveis, seguras e saborosas para os clientes.","author":{"@type":"Person","name":"Lourdes","url":"https://coisascadecasa.com.br/autor/lourdes/"},"publisher":{"@type":"Organization","name":"Lourdes","logo":{"@type":"ImageObject","url":"https://coisascadecasa.com.br/media/website/coisas-ca-de-casa.webp","height":512,"width":512}}}</script><noscript><style>img[loading] {
                    opacity: 1;
                }</style></noscript></head><body class="post-template"><header class="header" id="js-header"><a href="https://coisascadecasa.com.br/" class="logo"><img src="https://coisascadecasa.com.br/media/website/coisas-ca-de-casa.webp" alt="Coisas Cá de Casa" width="512" height="512"></a><nav class="navbar js-navbar"><button class="navbar__toggle js-toggle" aria-label="Menu"><span class="navbar__toggle-box"><span class="navbar__toggle-inner">Menu</span></span></button><ul class="navbar__menu"><li class="has-submenu"><a href="https://coisascadecasa.com.br/categoria/receitas/" title="Receitas" target="_self" aria-haspopup="true">Receitas</a><ul class="navbar__submenu level-2" aria-hidden="true"><li><a href="https://coisascadecasa.com.br/categoria/receitas-doces/" title="Docês" target="_self">Docês</a></li><li><a href="https://coisascadecasa.com.br/categoria/receitas-salgadas/" title="Salgadas" target="_self">Salgadas</a></li></ul></li><li><a href="https://coisascadecasa.com.br/categoria/receitas-doces/" title="Docês" target="_self">Docês</a></li><li><a href="https://coisascadecasa.com.br/categoria/bebidas/" title="Bebidas" target="_self">Bebidas</a></li><li><a href="https://coisascadecasa.com.br/categoria/restaurantes/" title="Restaurantes" target="_self">Restaurantes</a></li><li><a href="https://coisascadecasa.com.br/categoria/blog/" title="Blog" target="_self">Blog</a></li></ul></nav></header><main class="post"><div class="wrapper"><article class="content"><header class="content__header"><a href="https://coisascadecasa.com.br/categoria/restaurantes/" class="content__maintag">Restaurantes</a><h1 class="content__title">O que faz um nutricionista de restaurantes ?</h1><div class="content__meta"><div class="content__author">Por <a href="https://coisascadecasa.com.br/autor/lourdes/" class="invert" rel="author" title="Lourdes">Lourdes</a></div><time datetime="2025-09-18T00:00">18/09/2025</time></div></header><figure class="content__featured-image"><img src="https://coisascadecasa.com.br/media/posts/237/o-que-faz-um-nutricionista-de-restaurantes.jpg" loading="eager" height="768" width="1344" alt=""></figure><div class="content__inner"><div class="content__entry"><p>Quando pensamos em restaurantes, a primeira imagem que vem à mente geralmente é a de pratos saborosos, ambiente aconchegante e atendimento eficiente. No entanto, por trás de uma boa experiência gastronômica, existe um profissional essencial para garantir que a alimentação seja não apenas deliciosa, mas também saudável e segura: o <strong>nutricionista de restaurantes</strong>. Mas afinal, qual é o papel desse especialista dentro do universo gastronômico? Vamos desvendar as funções e responsabilidades desse profissional tão importante para o sucesso de um estabelecimento.</p><h2>O papel fundamental do nutricionista de restaurantes</h2><p>O <strong>nutricionista de restaurantes</strong> é o profissional responsável por planejar, supervisionar e garantir que os alimentos oferecidos estejam alinhados com critérios nutricionais e de segurança alimentar. Ele atua para equilibrar sabor e saúde, pensando tanto na qualidade dos ingredientes quanto no bem-estar dos clientes.</p><p>Esse profissional pode atuar em diferentes tipos de estabelecimentos, desde restaurantes tradicionais até redes de fast-food, hotéis, buffets e até mesmo empresas de alimentação coletiva. Em todos os casos, o objetivo é garantir que o cardápio seja atrativo, variado e, ao mesmo tempo, nutricionalmente adequado.</p><h3>Planejamento do cardápio</h3><p>Uma das funções mais importantes do nutricionista em restaurantes é o <strong>planejamento do cardápio</strong>. Ele analisa as opções de pratos que serão oferecidos, pensando em como balancear os nutrientes, priorizar ingredientes frescos e garantir a diversidade de opções para diferentes públicos.</p><p>Por exemplo, o profissional pode incluir opções vegetarianas, veganas, sem glúten ou com baixo teor de sódio, atendendo assim a diferentes necessidades e preferências. Além disso, o nutricionista avalia as combinações de alimentos para garantir que as refeições sejam equilibradas, promovendo saciedade e saúde.</p><h3>Controle de qualidade e segurança alimentar</h3><p>Outro aspecto essencial é o <strong>controle de qualidade e segurança alimentar</strong>. O nutricionista supervisiona os processos de armazenamento, preparo e manipulação dos alimentos, garantindo que tudo esteja conforme as normas sanitárias vigentes.</p><p>Essa fiscalização é fundamental para evitar contaminações e intoxicações alimentares, protegendo a saúde dos consumidores e evitando prejuízos para o restaurante, como multas ou perda de reputação.</p><h2>Impacto do nutricionista na sustentabilidade do restaurante</h2><p>Além de cuidar da saúde dos clientes, o nutricionista de restaurantes também tem papel importante na <strong>sustentabilidade</strong> dos estabelecimentos. Ele pode ajudar a reduzir o desperdício de alimentos, sugerir o uso de ingredientes sazonais e locais, e incentivar práticas que respeitam o meio ambiente.</p><h3>Redução do desperdício</h3><p>O desperdício é um desafio para muitos restaurantes. O nutricionista atua planejando as quantidades corretas de ingredientes para evitar excessos e orientando a reutilização adequada dos alimentos, quando possível, sem comprometer a segurança.</p><h3>Escolha de ingredientes sustentáveis</h3><p>Optar por ingredientes produzidos localmente e de forma sustentável não só valoriza produtores da região, mas também diminui o impacto ambiental do transporte e da produção em larga escala. O nutricionista pode colaborar com fornecedores e chefs para priorizar essas escolhas.</p><h2>Educação e treinamento da equipe</h2><p>O papel do nutricionista de restaurantes vai além da cozinha e do cardápio. Ele também é responsável por <strong>educar e treinar a equipe</strong>, garantindo que todos compreendam a importância das boas práticas de higiene e manipulação dos alimentos.</p><h3>Capacitação dos manipuladores de alimentos</h3><p>Organizar treinamentos periódicos para cozinheiros, auxiliares e demais funcionários é fundamental para manter os padrões de higiene e segurança. O nutricionista orienta sobre técnicas corretas de preparo, armazenamento e limpeza, reduzindo riscos de contaminação.</p><h3>Conscientização sobre a importância da alimentação saudável</h3><p>Além disso, o profissional pode incentivar a equipe a valorizar a alimentação saudável, ajudando a criar um ambiente de trabalho mais consciente e comprometido com a qualidade dos serviços oferecidos.</p><h2>Atendimento às normas e legislações vigentes</h2><p>Para que o restaurante funcione corretamente, é vital que esteja em conformidade com as <strong>normas e legislações</strong> relacionadas à segurança alimentar e à saúde pública. O nutricionista é o profissional habilitado para orientar o estabelecimento sobre essas regras.</p><p>Ele acompanha inspeções sanitárias, prepara a documentação necessária, como o registro do serviço de alimentação, e implementa protocolos internos para garantir que todas as exigências sejam cumpridas.</p><h3>Certificações e registros</h3><p>Ter um nutricionista no quadro de funcionários ou contratar esse serviço pode ser um diferencial para o restaurante, pois facilita a obtenção de certificações importantes que atestam a qualidade e segurança do serviço.</p><h2>Nutricionista de restaurantes e a experiência do cliente</h2><p>Ao pensar na experiência do cliente, o nutricionista tem um papel indireto, mas crucial. Afinal, a satisfação do consumidor está muito ligada à qualidade e à percepção de valor da alimentação recebida.</p><h3>Criação de pratos nutritivos e saborosos</h3><p>Apesar de o sabor ser o principal atrativo, o equilíbrio nutricional agrega valor e fideliza clientes que buscam uma alimentação mais saudável, sem abrir mão do prazer à mesa.</p><h3>Atendimento a restrições alimentares</h3><p>Outro ponto importante é a capacidade de atender a restrições e alergias alimentares. O nutricionista ajuda a montar opções seguras para pessoas com intolerâncias, alergias ou necessidades específicas, ampliando o público do restaurante.</p><h2>Desafios enfrentados pelo nutricionista em restaurantes</h2><p>Embora o trabalho do nutricionista seja fundamental, ele também enfrenta desafios diários. Conciliação entre sabor e saúde, pressão por custos reduzidos, adaptação às tendências alimentares e educação contínua da equipe são alguns deles.</p><h3>Equilibrar custo e qualidade</h3><p>Um dos maiores dilemas é oferecer pratos nutricionalmente equilibrados sem elevar muito os custos. O profissional deve buscar alternativas que mantenham a qualidade, mas que também sejam viáveis para o orçamento do restaurante.</p><h3>Acompanhamento das tendências alimentares</h3><p>O mundo da alimentação está em constante mudança, com novas dietas, superalimentos e demandas por opções mais sustentáveis. O nutricionista deve estar sempre atualizado para incorporar essas novidades de forma adequada.</p><h2>Por que contratar um nutricionista para seu restaurante?</h2><p>Ter um <strong>nutricionista de restaurantes</strong> é um investimento estratégico. Além de garantir a qualidade e segurança dos alimentos, esse profissional contribui para a imagem do estabelecimento, atraindo um público mais amplo e exigente.</p><p>Restaurantes que se preocupam com a saúde e a satisfação dos clientes tendem a ter maior fidelização e reconhecimento no mercado. Além disso, estar em conformidade com as normas evita problemas legais e mantém o negócio sustentável a longo prazo.</p><h3>Exemplo prático: Nutricionista em São Paulo</h3><p>Em grandes cidades como São Paulo, onde a diversidade de públicos e opções gastronômicas é enorme, contar com um <a href="https://leticiacallado.com.br/" rel="noopener" target="_blank">nutricionista em São Paulo</a> pode fazer toda a diferença para se destacar no mercado competitivo. Profissionais locais entendem as particularidades do público e as regulamentações específicas da região, oferecendo um serviço ainda mais alinhado às necessidades do restaurante.</p><h2>Conclusão</h2><p>O <strong>nutricionista de restaurantes</strong> é muito mais do que um profissional que apenas cuida do aspecto nutricional dos pratos. Ele é um parceiro estratégico na criação de cardápios saborosos, seguros e sustentáveis, que atendem aos desejos e necessidades de um público cada vez mais consciente.</p><p>Seja no planejamento do cardápio, na supervisão da segurança alimentar, na educação da equipe ou na adaptação às tendências do mercado, o nutricionista é peça-chave para o sucesso e longevidade do restaurante. Valorizar esse profissional é investir na qualidade, saúde e satisfação dos clientes – ingredientes essenciais para qualquer negócio gastronômico.</p></div><footer><div class="content__tags-share"><ul class="content__tag"><li><a href="https://coisascadecasa.com.br/categoria/restaurantes/">Restaurantes</a></li></ul><aside class="content__share"><a href="https://pinterest.com/pin/create/button/?url=https%3A%2F%2Fcoisascadecasa.com.br%2Fo-que-faz-um-nutricionista-de-restaurantes%2F&amp;media=https%3A%2F%2Fcoisascadecasa.com.br%2Fmedia%2Fposts%2F237%2Fo-que-faz-um-nutricionista-de-restaurantes.jpg&amp;description=O%20que%20faz%20um%20nutricionista%20de%20restaurantes%20%3F" class="js-share pinterest" aria-label="Compartilhar com Pinterest" rel="nofollow noopener noreferrer"><svg><use xlink:href="https://coisascadecasa.com.br/assets/svg/svg-map.svg#pinterest"/></svg> </a><a href="https://api.whatsapp.com/send?text=O%20que%20faz%20um%20nutricionista%20de%20restaurantes%20%3F https%3A%2F%2Fcoisascadecasa.com.br%2Fo-que-faz-um-nutricionista-de-restaurantes%2F" class="js-share whatsapp" aria-label="Compartilhar com o WhatsApp" rel="nofollow noopener noreferrer"><svg class="icon" aria-hidden="true" focusable="false"><use xlink:href="https://coisascadecasa.com.br/assets/svg/svg-map.svg#whatsapp"/></svg></a></aside></div><div class="content__bio bio"><div><h3 class="h6 bio__name"><a href="https://coisascadecasa.com.br/autor/lourdes/" class="invert" title="Lourdes">Lourdes</a></h3></div></div><nav class="content__nav"><div class="content__nav__prev"><a class="content__nav__link" href="https://coisascadecasa.com.br/a-historia-da-cerveja-artesanal-no-brasil-e-no-mundo/" rel="prev">Post anterior<h3 class="h6">A História da Cerveja Artesanal no Brasil e no Mundo</h3></a></div><div class="content__nav__next"><a class="content__nav__link" href="https://coisascadecasa.com.br/como-fazer-doces-deliciosos-livres-de-lactose-em-casa/" rel="prev">Próximo post<h3 class="h6">Como Fazer Doces Deliciosos Livres de Lactose em Casa</h3></a></div></nav></footer></div></article></div><div class="content__related"><div class="wrapper"><h2 class="h5">Relacionados</h2><div class="l-grid l-grid--4"><article class="c-card"><a href="https://coisascadecasa.com.br/roupas-lgbt-para-jantar-estilos-e-restaurantes-que-abracam-a-comunidade/" class="c-card__image"><img src="https://coisascadecasa.com.br/media/posts/224/Roupas-LGBT-para-Jantar.jpg" loading="lazy" height="316" width="474" alt=""></a><div class="c-card__wrapper"><header class="c-card__header"><div class="c-card__tag"><a href="https://coisascadecasa.com.br/categoria/restaurantes/">Restaurantes</a></div><h3 class="c-card__title"><a href="https://coisascadecasa.com.br/roupas-lgbt-para-jantar-estilos-e-restaurantes-que-abracam-a-comunidade/" class="invert">Roupas LGBT para Jantar: Estilos e Restaurantes Que Abraçam a Comunidade</a></h3></header></div></article><article class="c-card"><div class="c-card__wrapper"><header class="c-card__header"><div class="c-card__tag"><a href="https://coisascadecasa.com.br/categoria/blog/">Blog</a></div><h3 class="c-card__title"><a href="https://coisascadecasa.com.br/redes-sociais-para-restaurantes-o-que-postar-e-como-divulgar-o-seu/" class="invert">Redes sociais para restaurantes: o que postar e como divulgar o seu</a></h3></header></div></article></div></div></div></main><footer class="footer"><div class="footer__copyright">Todos os Direitos Reservados - 2024 Coisas Cá de Casa</div></footer><script>window.publiiThemeMenuConfig = {    
      mobileMenuMode: 'sidebar',
      animationSpeed: 300,
      submenuWidth: 'auto',
      doubleClickTime: 500,
      mobileMenuExpandableSubmenus: true, 
      relatedContainerForOverlayMenuSelector: '.navbar',
   };</script><script defer="defer" src="https://coisascadecasa.com.br/assets/js/scripts.min.js?v=1b09dc64eb6086ddc9720890661ff038"></script><script>var images = document.querySelectorAll('img[loading]');

      for (var i = 0; i < images.length; i++) {
         if (images[i].complete) {
               images[i].classList.add('is-loaded');
         } else {
               images[i].addEventListener('load', function () {
                  this.classList.add('is-loaded');
               }, false);
         }
      }</script><p>As receitas deste blog são. muitas delas, receitas de família, e outras, são receitas que venho colecionando ao longo do tempo em compartilhamentos com amigos. Ou quando não, são receitas reproduzidas de outros blogs, mas sempre com os devidos créditos. Se gostou de alguma, pode levá-la, mas sempre fazendo menção ao Coisas cá de casa.</p><p></p><ul style="list-style: none; padding: 0; text-align: center;"><li style="display: inline; margin: 0 10px;"><a href="https://coisascadecasa.com.br/contato/" style="text-decoration: none; color: black; font-weight: bold;">Contato</a></li><li style="display: inline; margin: 0 10px;"><a href="https://coisascadecasa.com.br/politica-de-privacidade/" style="text-decoration: none; color: black; font-weight: bold;">Política de Privacidade</a></li><li style="display: inline; margin: 0 10px;"><a href="https://coisascadecasa.com.br/termos-e-condicoes/" style="text-decoration: none; color: black; font-weight: bold;">Termos e Condições</a></li></ul><div class="pcb" data-behaviour="badge" data-behaviour-link="#cookie-settings" data-revision="1" data-config-ttl="90" data-debug-mode="false"><div role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="pcb-title" aria-describedby="pcb-txt" class="pcb__banner"><div class="pcb__inner"><div id="pcb-title" role="heading" aria-level="2" class="pcb__title">Esse site usa cookies</div><div id="pcb-txt" class="pcb__txt">Selecione quais cookies deseja aceitar por meio das caixas de seleção abaixo; nosso site usa cookies para examinar o tráfego do site e a atividade do usuário enquanto estiver em nosso site, para fins de marketing e para fornecer funcionalidade de mídia social. <a href="#not-specified">Mais detalhes</a></div><div class="pcb__buttons"><button type="button" class="pcb__btn pcb__btn--link pcb__btn--configure" aria-haspopup="dialog">Gerenciar preferências</button> <button type="button" class="pcb__btn pcb__btn--solid pcb__btn--accept">Aceitar tudo</button></div></div></div><div class="pcb__popup" role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="pcb-popup-title"><div class="pcb__popup__wrapper"><div class="pcb__inner pcb__popup__inner"><div class="pcb__popup__heading"><div id="pcb-popup-title" role="heading" aria-level="2" class="pcb__title">Configuração Cookie</div><button class="pcb__popup__close" aria-label="Close"></button></div><div class="pcb__popup__content"><div class="pcb__txt pcb__popup__txt">Usamos cookies para melhorar sua experiência de navegação, veicular anúncios ou conteúdo personalizado e analisar nosso tráfego. Ao clicar em "Aceitar tudo", você concorda com nosso uso de cookies. <a href="#not-specified">Mais detalhes</a></div><ul class="pcb__groups"></ul></div><div class="pcb__buttons pcb__popup__buttons"><button type="button" class="pcb__btn pcb__btn--solid pcb__btn--accept">Aceitar tudo</button> <button type="button" class="pcb__btn pcb__btn--reject">Rejeitar tudo</button> <button type="button" class="pcb__btn pcb__btn--save">Save settings</button></div></div></div></div><div class="pcb__overlay" aria-hidden="true"></div><button class="pcb__badge" aria-label="Política de Cookie" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" width="40" height="40" viewBox="0 0 23 23" fill="currentColor"><path d="M21.41 12.71c-.08-.01-.15 0-.22 0h-.03c-.03 0-.05 0-.08.01-.07 0-.13.01-.19.04-.52.21-1.44.19-2.02-.22-.44-.31-.65-.83-.62-1.53a.758.758 0 0 0-.27-.61.73.73 0 0 0-.65-.14c-1.98.51-3.49.23-4.26-.78-.82-1.08-.73-2.89.24-4.49.14-.23.14-.52 0-.75a.756.756 0 0 0-.67-.36c-.64.03-1.11-.1-1.31-.35-.19-.26-.13-.71-.01-1.29.04-.18.06-.38.03-.59-.05-.4-.4-.7-.81-.66C5.1 1.54 1 6.04 1 11.48 1 17.28 5.75 22 11.6 22c5.02 0 9.39-3.54 10.39-8.42.08-.4-.18-.78-.58-.87Zm-9.81 7.82c-5.03 0-9.12-4.06-9.12-9.06 0-4.34 3.05-8 7.25-8.86-.08.7.05 1.33.42 1.81.24.32.66.67 1.38.84-.76 1.86-.65 3.78.36 5.11.61.81 2.03 2 4.95 1.51.18.96.71 1.54 1.18 1.87.62.43 1.38.62 2.1.62.05 0 .09 0 .13-.01-1.23 3.64-4.7 6.18-8.64 6.18ZM13 17c0 .55-.45 1-1 1s-1-.45-1-1 .45-1 1-1 1 .45 1 1Zm5.29-12.3a.99.99 0 0 1-.29-.71c0-.55.45-.99 1-.99a1 1 0 0 1 .71.3c.19.19.29.44.29.71 0 .55-.45.99-1 .99a1 1 0 0 1-.71-.3ZM9 13.5c0 .83-.67 1.5-1.5 1.5S6 14.33 6 13.5 6.67 12 7.5 12s1.5.67 1.5 1.5Zm3.25.81a.744.744 0 0 1-.06-1.05c.28-.32.75-.34 1.05-.06.31.28.33.75.05 1.06-.15.16-.35.25-.56.25-.18 0-.36-.06-.5-.19ZM8.68 7.26c.41.37.44 1 .07 1.41-.2.22-.47.33-.75.33a.96.96 0 0 1-.67-.26c-.41-.37-.44-1-.07-1.41.37-.42 1-.45 1.41-.08Zm11.48 1.88c.18-.19.52-.19.7 0 .05.04.09.1.11.16.03.06.04.12.04.19 0 .13-.05.26-.15.35-.09.1-.22.15-.35.15s-.26-.05-.35-.15a.355.355 0 0 1-.11-.16.433.433 0 0 1-.04-.19c0-.13.05-.26.15-.35Zm-4.93-1.86a.75.75 0 1 1 1.059-1.06.75.75 0 0 1-1.059 1.06Z"/></svg></button></div><script>(function(win) {
    if (!document.querySelector('.pcb')) {
        return;
    }

    var cbConfig = {
        behaviour: document.querySelector('.pcb').getAttribute('data-behaviour'),
        behaviourLink: document.querySelector('.pcb').getAttribute('data-behaviour-link'),
        revision: document.querySelector('.pcb').getAttribute('data-revision'),
        configTTL: parseInt(document.querySelector('.pcb').getAttribute('data-config-ttl'), 10),
        debugMode: document.querySelector('.pcb').getAttribute('data-debug-mode') === 'true',
        initialState: null,
        initialLsState: null,
        previouslyAccepted: []
    };

    var cbUI = {
        wrapper: document.querySelector('.pcb'),
        banner: {
            element: null,
            btnAccept: null,
            btnReject: null,
            btnConfigure: null
        },
        popup: {
            element: null,
            btnClose: null,
            btnSave: null,
            btnAccept: null,
            btnReject: null,
            checkboxes: null,
        },
        overlay: null,
        badge: null,
        blockedScripts: document.querySelectorAll('script[type^="gdpr-blocker/"]'),
        triggerLinks: cbConfig.behaviourLink ? document.querySelectorAll('a[href*="' + cbConfig.behaviourLink + '"]') : null
    };

    function initUI () {
        // setup banner elements
        cbUI.banner.element = cbUI.wrapper.querySelector('.pcb__banner');
        cbUI.banner.btnAccept = cbUI.banner.element.querySelector('.pcb__btn--accept');
        cbUI.banner.btnReject = cbUI.banner.element.querySelector('.pcb__btn--reject');
        cbUI.banner.btnConfigure = cbUI.banner.element.querySelector('.pcb__btn--configure');

        // setup popup elements
        if (cbUI.wrapper.querySelector('.pcb__popup')) {
            cbUI.popup.element = cbUI.wrapper.querySelector('.pcb__popup');
            cbUI.popup.btnClose = cbUI.wrapper.querySelector('.pcb__popup__close');
            cbUI.popup.btnSave = cbUI.popup.element.querySelector('.pcb__btn--save');
            cbUI.popup.btnAccept = cbUI.popup.element.querySelector('.pcb__btn--accept');
            cbUI.popup.btnReject = cbUI.popup.element.querySelector('.pcb__btn--reject');
            cbUI.popup.checkboxes = cbUI.popup.element.querySelector('input[type="checkbox"]');
            // setup overlay
            cbUI.overlay = cbUI.wrapper.querySelector('.pcb__overlay');
        }

        cbUI.badge = cbUI.wrapper.querySelector('.pcb__badge');

        if (cbConfig.behaviour.indexOf('link') > -1) {
            for (var i = 0; i < cbUI.triggerLinks.length; i++) {
                cbUI.triggerLinks[i].addEventListener('click', function(e) {
                    e.preventDefault();
                    showBannerOrPopup();
                });
            }
        }
    }

    function initState () {
        var lsKeyName = getConfigName();
        var currentConfig = localStorage.getItem(lsKeyName);
        var configIsFresh = checkIfConfigIsFresh();

        if (!configIsFresh || currentConfig === null) {
            if (cbConfig.debugMode) {
                console.log('🍪 Config not found, or configuration expired');
            }

            if (window.publiiCBGCM) {
                gtag('consent', 'default', {
                    'ad_storage': window.publiiCBGCM.defaultState.ad_storage ? 'granted' : 'denied',
                    'ad_personalization': window.publiiCBGCM.defaultState.ad_personalization ? 'granted' : 'denied',
                    'ad_user_data': window.publiiCBGCM.defaultState.ad_user_data ? 'granted' : 'denied',
                    'analytics_storage': window.publiiCBGCM.defaultState.analytics_storage ? 'granted' : 'denied',
                    'personalization_storage': window.publiiCBGCM.defaultState.personalization_storage ? 'granted' : 'denied',
                    'functionality_storage': window.publiiCBGCM.defaultState.functionality_storage ? 'granted' : 'denied',
                    'security_storage': window.publiiCBGCM.defaultState.security_storage ? 'granted' : 'denied'
                });  
                
                if (cbConfig.debugMode) {
                    console.log('🍪 GCMv2 DEFAULT STATE: ' + JSON.stringify({
                        'ad_storage': window.publiiCBGCM.defaultState.ad_storage ? 'granted' : 'denied',
                        'ad_personalization': window.publiiCBGCM.defaultState.ad_personalization ? 'granted' : 'denied',
                        'ad_user_data': window.publiiCBGCM.defaultState.ad_user_data ? 'granted' : 'denied',
                        'analytics_storage': window.publiiCBGCM.defaultState.analytics_storage ? 'granted' : 'denied',
                        'personalization_storage': window.publiiCBGCM.defaultState.personalization_storage ? 'granted' : 'denied',
                        'functionality_storage': window.publiiCBGCM.defaultState.functionality_storage ? 'granted' : 'denied',
                        'security_storage': window.publiiCBGCM.defaultState.security_storage ? 'granted' : 'denied'
                    }));
                }
            }

            showBanner();
        } else if (typeof currentConfig === 'string') {
            if (cbConfig.debugMode) {
                console.log('🍪 Config founded');
            }

            cbConfig.initialLsState = currentConfig.split(',');

            if (window.publiiCBGCM) {
                gtag('consent', 'default', {
                    'ad_storage': getDefaultConsentState(currentConfig, 'ad_storage'),
                    'ad_personalization': getDefaultConsentState(currentConfig, 'ad_personalization'),
                    'ad_user_data': getDefaultConsentState(currentConfig, 'ad_user_data'),
                    'analytics_storage': getDefaultConsentState(currentConfig, 'analytics_storage'),
                    'personalization_storage': getDefaultConsentState(currentConfig, 'personalization_storage'),
                    'functionality_storage': getDefaultConsentState(currentConfig, 'functionality_storage'),
                    'security_storage': getDefaultConsentState(currentConfig, 'security_storage')
                });
                
                if (cbConfig.debugMode) {
                    console.log('🍪 GCMv2 DEFAULT STATE: ' + JSON.stringify({
                        'ad_storage': getDefaultConsentState(currentConfig, 'ad_storage'),
                        'ad_personalization': getDefaultConsentState(currentConfig, 'ad_personalization'),
                        'ad_user_data': getDefaultConsentState(currentConfig, 'ad_user_data'),
                        'analytics_storage': getDefaultConsentState(currentConfig, 'analytics_storage'),
                        'personalization_storage': getDefaultConsentState(currentConfig, 'personalization_storage'),
                        'functionality_storage': getDefaultConsentState(currentConfig, 'functionality_storage'),
                        'security_storage': getDefaultConsentState(currentConfig, 'security_storage')
                    }));
                }
            }

            showBadge();

            if (cbUI.popup.element) {
                var allowedGroups = currentConfig.split(',');
                var checkedCheckboxes = cbUI.popup.element.querySelectorAll('input[type="checkbox"]:checked');

                for (var j = 0; j < checkedCheckboxes.length; j++) {
                    var name = checkedCheckboxes[j].getAttribute('data-group-name');

                    if (name && name !== '-' && allowedGroups.indexOf(name) === -1) {
                        checkedCheckboxes[j].checked = false;
                    }
                }

                for (var i = 0; i < allowedGroups.length; i++) {
                    var checkbox = cbUI.popup.element.querySelector('input[type="checkbox"][data-group-name="' + allowedGroups[i] + '"]');

                    if (checkbox) {
                        checkbox.checked = true;
                    }

                    allowCookieGroup(allowedGroups[i]);
                }
            }
        }

        setTimeout(function () {
            cbConfig.initialState = getInitialStateOfConsents();
        }, 0);
    }

    function checkIfConfigIsFresh () {
        var lastConfigSave = localStorage.getItem('publii-gdpr-cookies-config-save-date');

        if (lastConfigSave === null) {
            return false;
        }

        lastConfigSave = parseInt(lastConfigSave, 10);

        if (lastConfigSave === 0) {
            return true;
        }

        if (+new Date() - lastConfigSave < cbConfig.configTTL * 24 * 60 * 60 * 1000) {
            return true;
        }

        return false;
    }

    function getDefaultConsentState (currentConfig, consentGroup) {
        let configGroups = currentConfig.split(',');

        for (let i = 0; i < configGroups.length; i++) {
            let groupName = configGroups[i];
            let group = window.publiiCBGCM.groups.find(group => group.cookieGroup === groupName);

            if (group && group[consentGroup]) {
                return 'granted';
            }
        }  
        
        if (window.publiiCBGCM.defaultState[consentGroup]) {
            return 'granted'; 
        }
        
        return 'denied';
    }

    function initBannerEvents () {
        cbUI.banner.btnAccept.addEventListener('click', function (e) {
            e.preventDefault();
            acceptAllCookies('banner');
            showBadge();
        }, false);

        if (cbUI.banner.btnReject) {
            cbUI.banner.btnReject.addEventListener('click', function (e) {
                e.preventDefault();
                rejectAllCookies();
                showBadge();
            }, false);
        }

        if (cbUI.banner.btnConfigure) {
            cbUI.banner.btnConfigure.addEventListener('click', function (e) {
                e.preventDefault();
                hideBanner();
                showAdvancedPopup();
                showBadge();
            }, false);
        }
    }

    function initPopupEvents () {
        if (!cbUI.popup.element) {
            return;
        }

        cbUI.overlay.addEventListener('click', function (e) {
            hideAdvancedPopup();
        }, false);

        cbUI.popup.element.addEventListener('click', function (e) {
            e.stopPropagation();
        }, false);

        cbUI.popup.btnAccept.addEventListener('click', function (e) {
            e.preventDefault();
            acceptAllCookies('popup');
        }, false);

        cbUI.popup.btnReject.addEventListener('click', function (e) {
            e.preventDefault();
            rejectAllCookies();
        }, false);

        cbUI.popup.btnSave.addEventListener('click', function (e) {
            e.preventDefault();
            saveConfiguration();
        }, false);

        cbUI.popup.btnClose.addEventListener('click', function (e) {
            e.preventDefault();
            hideAdvancedPopup();
        }, false);
    }

    function initBadgeEvents () {
        if (!cbUI.badge) {
            return;
        }

        cbUI.badge.addEventListener('click', function (e) {
            showBannerOrPopup();
        }, false);
    }

    initUI();
    initState();
    initBannerEvents();
    initPopupEvents();
    initBadgeEvents();

    /**
     * API
     */
    function addScript (src, inline) {
        var newScript = document.createElement('script');

        if (src) {
            newScript.setAttribute('src', src);
        }

        if (inline) {
            newScript.text = inline;
        }

        document.body.appendChild(newScript);
    }

    function allowCookieGroup (allowedGroup) {
        var scripts = document.querySelectorAll('script[type="gdpr-blocker/' + allowedGroup + '"]');
        cbConfig.previouslyAccepted.push(allowedGroup);
    
        for (var j = 0; j < scripts.length; j++) {
            addScript(scripts[j].src, scripts[j].text);
        }

        var groupEvent = new Event('publii-cookie-banner-unblock-' + allowedGroup);
        document.body.dispatchEvent(groupEvent);
        unlockEmbeds(allowedGroup);

        if (cbConfig.debugMode) {
            console.log('🍪 Allowed group: ' + allowedGroup);
        }

        if (window.publiiCBGCM && (!cbConfig.initialLsState || cbConfig.initialLsState.indexOf(allowedGroup) === -1)) {
            let consentResult = {};
            let group = window.publiiCBGCM.groups.find(group => group.cookieGroup === allowedGroup);

            if (group) {
                let foundSomeConsents = false;

                Object.keys(group).forEach(key => {
                    if (key !== 'cookieGroup' && group[key] === true) {
                        consentResult[key] = 'granted';
                        foundSomeConsents = true;
                    }
                });

                if (foundSomeConsents) {
                    gtag('consent', 'update', consentResult);   

                    if (cbConfig.debugMode) {
                        console.log('🍪 GCMv2 UPDATE: ' + JSON.stringify(consentResult));
                    }
                }
            }
        }
    }

    function showBannerOrPopup () {
        if (cbUI.popup.element) {
            showAdvancedPopup();
        } else {
            showBanner();
        }
    }

    function showAdvancedPopup () {
        cbUI.popup.element.classList.add('is-visible');
        cbUI.overlay.classList.add('is-visible');
        cbUI.popup.element.setAttribute('aria-hidden', 'false');
        cbUI.overlay.setAttribute('aria-hidden', 'false');
    }

    function hideAdvancedPopup () {
        cbUI.popup.element.classList.remove('is-visible');
        cbUI.overlay.classList.remove('is-visible');
        cbUI.popup.element.setAttribute('aria-hidden', 'true');
        cbUI.overlay.setAttribute('aria-hidden', 'true');
    }

    function showBanner () {
        cbUI.banner.element.classList.add('is-visible');
        cbUI.banner.element.setAttribute('aria-hidden', 'false');
    }

    function hideBanner () {
        cbUI.banner.element.classList.remove('is-visible');
        cbUI.banner.element.setAttribute('aria-hidden', 'true');
    }

    function showBadge () {
        if (!cbUI.badge) {
            return;
        }

        cbUI.badge.classList.add('is-visible');
        cbUI.badge.setAttribute('aria-hidden', 'false');
    }

    function getConfigName () {
        var lsKeyName = 'publii-gdpr-allowed-cookies';

        if (cbConfig.revision) {
            lsKeyName = lsKeyName + '-v' + parseInt(cbConfig.revision, 10);
        }

        return lsKeyName;
    }

    function storeConfiguration (allowedGroups) {
        var lsKeyName = getConfigName();
        var dataToStore = allowedGroups.join(',');
        localStorage.setItem(lsKeyName, dataToStore);

        if (cbConfig.configTTL === 0) {
            localStorage.setItem('publii-gdpr-cookies-config-save-date', 0);

            if (cbConfig.debugMode) {
                console.log('🍪 Store never expiring configuration');
            }
        } else {
            localStorage.setItem('publii-gdpr-cookies-config-save-date', +new Date());
        }
    }

    function getInitialStateOfConsents () {
        if (!cbUI.popup.element) {
            return [];
        }

        var checkedGroups = cbUI.popup.element.querySelectorAll('input[type="checkbox"]:checked');
        var groups = [];

        for (var i = 0; i < checkedGroups.length; i++) {
            var allowedGroup = checkedGroups[i].getAttribute('data-group-name');

            if (allowedGroup !== '') {
                groups.push(allowedGroup);
            }
        }

        if (cbConfig.debugMode) {
            console.log('🍪 Initial state: ' + groups.join(', '));
        }

        return groups;
    }

    function getCurrentStateOfConsents () {
        if (!cbUI.popup.element) {
            return [];
        }

        var checkedGroups = cbUI.popup.element.querySelectorAll('input[type="checkbox"]:checked');
        var groups = [];

        for (var i = 0; i < checkedGroups.length; i++) {
            var allowedGroup = checkedGroups[i].getAttribute('data-group-name');

            if (allowedGroup !== '') {
                groups.push(allowedGroup);
            }
        }

        if (cbConfig.debugMode) {
            console.log('🍪 State to save: ' + groups.join(', '));
        }

        return groups;
    }

    function getAllGroups () {
        if (!cbUI.popup.element) {
            return [];
        }

        var checkedGroups = cbUI.popup.element.querySelectorAll('input[type="checkbox"]');
        var groups = [];

        for (var i = 0; i < checkedGroups.length; i++) {
            var allowedGroup = checkedGroups[i].getAttribute('data-group-name');

            if (allowedGroup !== '') {
                groups.push(allowedGroup);
            }
        }

        return groups;
    }

    function acceptAllCookies (source) {
        var groupsToAccept = getAllGroups();
        storeConfiguration(groupsToAccept);

        for (var i = 0; i < groupsToAccept.length; i++) {
            var group = groupsToAccept[i];

            if (cbConfig.initialState.indexOf(group) > -1 || cbConfig.previouslyAccepted.indexOf(group) > -1) {
                if (cbConfig.debugMode) {
                    console.log('🍪 Skip previously activated group: ' + group);
                }

                continue;
            }

            allowCookieGroup(group);
        }

        if (cbUI.popup.element) {
            var checkboxesToCheck = cbUI.popup.element.querySelectorAll('input[type="checkbox"]');

            for (var j = 0; j < checkboxesToCheck.length; j++) {
                checkboxesToCheck[j].checked = true;
            }
        }

        if (cbConfig.debugMode) {
            console.log('🍪 Accept all cookies: ', groupsToAccept.join(', '));
        }

        if (source === 'popup') {
            hideAdvancedPopup();
        } else if (source === 'banner') {
            hideBanner();
        }
    }

    function rejectAllCookies () {
        if (cbConfig.debugMode) {
            console.log('🍪 Reject all cookies');
        }

        storeConfiguration([]);
        setTimeout(function () {
            window.location.reload();
        }, 100);
    }

    function saveConfiguration () {
        var groupsToAccept = getCurrentStateOfConsents();
        storeConfiguration(groupsToAccept);

        if (cbConfig.debugMode) {
            console.log('🍪 Save new config: ', groupsToAccept.join(', '));
        }

        if (reloadIsNeeded(groupsToAccept)) {
            setTimeout(function () {
                window.location.reload();
            }, 100);
            return;
        }

        for (var i = 0; i < groupsToAccept.length; i++) {
            var group = groupsToAccept[i];

            if (cbConfig.initialState.indexOf(group) > -1 || cbConfig.previouslyAccepted.indexOf(group) > -1) {
                if (cbConfig.debugMode) {
                    console.log('🍪 Skip previously activated group: ' + group);
                }

                continue;
            }

            allowCookieGroup(group);
        }

        hideAdvancedPopup();
    }

    function reloadIsNeeded (groupsToAccept) {
        // check if user rejected consent for initial groups
        var initialGroups = cbConfig.initialState;
        var previouslyAcceptedGroups = cbConfig.previouslyAccepted;
        var groupsToCheck = initialGroups.concat(previouslyAcceptedGroups);

        for (var i = 0; i < groupsToCheck.length; i++) {
            var groupToCheck = groupsToCheck[i];

            if (groupToCheck !== '' && groupsToAccept.indexOf(groupToCheck) === -1) {
                if (cbConfig.debugMode) {
                    console.log('🍪 Reload is needed due lack of: ', groupToCheck);
                }

                return true;
            }
        }

        return false;
    }

    function unlockEmbeds (cookieGroup) {
        var iframesToUnlock = document.querySelectorAll('.pec-wrapper[data-consent-group-id="' + cookieGroup + '"]');

        for (var i = 0; i < iframesToUnlock.length; i++) {
            var iframeWrapper = iframesToUnlock[i];
            iframeWrapper.querySelector('.pec-overlay').classList.remove('is-active');
            iframeWrapper.querySelector('.pec-overlay').setAttribute('aria-hidden', 'true');
            var iframe = iframeWrapper.querySelector('iframe');
            iframe.setAttribute('src', iframe.getAttribute('data-consent-src'));
        }
    }

    win.publiiEmbedConsentGiven = function (cookieGroup) {
        // it will unlock embeds
        allowCookieGroup(cookieGroup);

        var checkbox = cbUI.popup.element.querySelector('input[type="checkbox"][data-group-name="' + cookieGroup + '"]');

        if (checkbox) {
            checkbox.checked = true;
        }

        var groupsToAccept = getCurrentStateOfConsents();
        storeConfiguration(groupsToAccept);

        if (cbConfig.debugMode) {
            console.log('🍪 Save new config: ', groupsToAccept.join(', '));
        }
    }
})(window);</script></body></html>